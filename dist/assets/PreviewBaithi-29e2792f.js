import{r as n,d as i,j as t,S as g,s as k,I as N,F as w,D as C,g as O}from"./index-91b1f472.js";import{c as j}from"./commonApi-ecfba693.js";import{a as v}from"./Radio-38c15278.js";const E=(e,r,s)=>{if(e===r===s||e===s&&r!==s)return"primary";if(e!==s&&r===s)return"error"},T=({question:e,index:r})=>{const[s,d]=n.useState(()=>e.choice);return n.useEffect(()=>{d(e.choice)},[e]),i("div",{className:"mb-1",children:[t("h4",{className:"font-semibold text-black text-sm md:text-[16px]",children:i("span",{className:"font-bold",children:[" ",i("span",{className:e.answer!==e.choice?"text-red-600":"",children:["Câu ",r,": "," ",e.question]})]})}),t("div",{children:e.image&&e.image!==""&&t("div",{className:"flex justify-center items-center my-4",children:t("img",{src:e.image,alt:"image",className:"w-full md:w-[400px]"})})}),t("ul",{className:"flex flex-col flex-wrap md:flex-row",children:e.options.map((c,h)=>i("li",{className:"flex items-start md:basis-1/2",children:[t(v,{name:e._id,checked:s===Object.keys(c)[0]||e.answer===Object.keys(c)[0],color:E(s,e.answer,Object.keys(c)[0]),value:Object.keys(c)[0]}),t("span",{className:"text-sm md:text-[16px] pt-[10px]",children:c[Object.keys(c)[0]]})]},h))})]})},_=n.forwardRef(function(r,s){return t(g,{direction:"up",ref:s,...r})}),S=k(N)({position:"absolute",right:"16px",top:"4px"});function R({open:e,onCloseDialogPreviewBaithi:r,idBaithi:s}){const[d,c]=n.useState([]),[h,u]=n.useState(0);return n.useEffect(()=>{e===!0&&(async(m,I)=>{try{let p=await j.previewTest(s);u(p.data.choicedTrue);let f=[];p.data.questionList.forEach(a=>{let x=[];a.options_sort.forEach(l=>x=[...x,{[l]:a.questionlist[l]}]);const y=x.map(l=>Object.fromEntries(Object.entries(l).filter(([B,b])=>b!==""))).filter(l=>Object.keys(l).length>0);f.push({question:a.questionlist.question,image:a.questionlist.image,answer:a.questionlist.answer,choice:a.choice,_id:a.questionlist._id,options:y})}),c(f)}catch(p){console.log(p.message)}})()},[s,e]),t(w,{children:i(C,{maxWidth:"2xl",fullWidth:!0,disableEscapeKeyDown:!0,onClose:(o,m)=>{m!=="backdropClick"&&r(o,m)},open:e,TransitionComponent:_,keepMounted:!0,"aria-describedby":"alert-dialog-slide-description",sx:{zIndex:1500},children:[t(S,{onClick:()=>r(),children:t(O,{style:{color:"#d32b2b"}})}),t("div",{className:"px-1 py-2",children:i("div",{className:"md:px-12 py-4 md:mx-2 mt-4",children:[i("p",{className:"text-sm md:text-[16px] font-semibold",children:["Bạn đã trả lời đúng ",h," đáp án."]}),t("p",{className:"mb-4 italic text-red-600 text-sm md:text-[16px]",children:" Những câu hỏi bạn trả lời sai, đáp án đúng là đáp án được tô đỏ."}),d==null?void 0:d.map((o,m)=>t(T,{question:o,index:m+1},o._id))]})})]})})}export{R as P};
