import{r as b,j as e,S as F,s as j,I as C,c as L,a as v,b as I,u as q,F as O,d as r,D as H,e as W,f as G,g as K,h as Q,B as w,L as J,G as p,i as S,k as U,l as D,m as $,o as N,n as X,v as _,w as d,y as oe,z as he,a6 as V,T as ce,a7 as de,q as ge,t as ue,x as be,a8 as pe,a9 as me,aa as R,ab as A,ac as E,ad as M,p as fe,C as ve,A as Te,ae as xe,E as ye,H as z}from"./index-ba6df1e4.js";import{d as Ce}from"./Dashboard-abf33f2e.js";import{S as P}from"./index-0e6fd8c9.js";const Se=b.forwardRef(function(o,t){return e(F,{direction:"up",ref:t,...o})}),Pe=j(C)({position:"absolute",right:"16px",top:"4px"}),ke=L({hoten:v().required("Lỗi: Vui lòng nhập họ tên thí sinh"),sbd:I().required("Lỗi: Vui lòng nhập số báo danh"),donvi:v().required("Lỗi: Vui lòng chọn đơn vị công tác"),capbac:v().required("Lỗi: Vui lòng chọn cấp bậc hàm"),chucvu:v().required("Lỗi: Vui lòng chọn chức vụ"),namsinh:v().required("Lỗi: Vui lòng nhập năm sinh")}).required();function De({open:l,onCloseDialogAdd:o,onSubmit:t,donviList:a}){const i=q({defaultValues:{hoten:"",sbd:1,donvi:"",namsinh:"1996",capbac:"",chucvu:""},resolver:N(ke)}),n=async g=>{t&&await t(g)},{isSubmitting:c}=i.formState;return e(O,{children:r(H,{fullWidth:!0,disableEscapeKeyDown:!0,onClose:(g,u)=>{u!=="backdropClick"&&o(g,u)},open:l,TransitionComponent:Se,keepMounted:!0,"aria-describedby":"alert-dialog-slide-description",children:[r(W,{style:{display:"flex",borderBottom:"1px solid #ccc",margin:"0 12px"},children:[e(G,{style:{color:"#333",fontSize:"32px"}}),e("span",{children:"Thêm mới thí sinh dự thi"}),e(Pe,{onClick:()=>o(),children:e(K,{style:{color:"#d32b2b"}})})]}),e(Q,{children:r(w,{children:[c?e(J,{}):"",r("form",{onSubmit:i.handleSubmit(n),style:{width:"100%"},children:[r(p,{container:!0,spacing:1,style:{alignItems:"center",justifyContent:"center"},children:[e(p,{item:!0,xs:12,md:12,lg:12,children:e(S,{name:"hoten",form:i,label:"Họ và tên *",type:"text",disabled:!1})}),e(p,{item:!0,xs:12,md:12,lg:12,children:e(S,{name:"sbd",form:i,label:"Số báo danh *",type:"number",disabled:!1})}),e(p,{item:!0,xs:12,md:12,lg:12,children:e(S,{name:"namsinh",form:i,label:"Năm sinh *",type:"text",disabled:!1})}),e(p,{item:!0,xs:12,md:12,lg:12,children:e(P,{name:"capbac",form:i,label:"Cấp bậc hàm *",disabled:!1,options:[{value:"Trung sĩ",label:"Trung sĩ"},{value:"Thượng sĩ",label:"Thượng sĩ"},{value:"Thiếu úy",label:"Thiếu úy"},{value:"Trung úy",label:"Trung úy"},{value:"Thượng úy",label:"Thượng úy"},{value:"Đại úy",label:"Đại úy"},{value:"Thiếu tá",label:"Thiếu tá"},{value:"Trung tá",label:"Trung tá"},{value:"Thượng tá",label:"Thượng tá"},{value:"Đại tá",label:"Đại tá"}]})}),e(p,{item:!0,xs:12,md:12,lg:12,children:e(P,{name:"chucvu",form:i,label:"Chức vụ công tác *",disabled:!1,options:[{value:"Chiến sĩ",label:"Chiến sĩ"},{value:"Cán bộ",label:"Cán bộ"},{value:"Phó đội trưởng và tương đương",label:"Phó đội trưởng và tương đương"},{value:"Đội trưởng và tương đương",label:"Đội trưởng và tương đương"},{value:"Phó Trưởng Công an xã, phường, thị trấn",label:"Phó Trưởng Công an xã, phường, thị trấn"},{value:"Trưởng Công an xã",label:"Trưởng Công an xã"},{value:"Trưởng Công an phường",label:"Trưởng Công an phường"},{value:"Trưởng Công an thị trấn",label:"Trưởng Công an thị trấn"},{value:"Phó Trưởng Công an huyện, thị xã, thành phố",label:"Phó Trưởng Công an huyện, thị xã, thành phố"},{value:"Trưởng Công an huyện, thị xã, thành phố",label:"Trưởng Công an huyện, thị xã, thành phố"},{value:"Phó Trưởng phòng và tương đương",label:"Phó Trưởng phòng và tương đương"},{value:"Trưởng phòng và tương đương",label:"Trưởng phòng và tương đương"}]})}),e(p,{item:!0,xs:12,md:12,lg:12,children:e(P,{name:"donvi",form:i,label:"Đơn vị công tác *",disabled:!1,options:a})})]}),e(U,{children:r(D,{color:"primary",variant:"contained",disabled:c,type:"submit",style:{margin:"4px auto"},children:[e($,{}),e("span",{children:"Thêm mới thí sinh"})]})})]})]})})]})})}const Ve=({row:l,onClickOpenDialogEdit:o,onClickOpenDialogDelete:t})=>{b.useState(null);const a=X(i=>i.authReducer.roles_x01);return r(_,{children:[e(d,{className:"border-r border-slate-300",align:"left",style:{fontWeight:"bold"},children:l.sbd}),e(d,{className:"border-r border-slate-300",align:"left",style:{fontWeight:"bold"},children:l.hoten}),e(d,{className:"border-r border-slate-300",align:"left",children:l.namsinh}),e(d,{className:"border-r border-slate-300",align:"left",children:l.capbac}),e(d,{className:"border-r border-slate-300",align:"left",children:l.chucvu}),e(d,{className:"border-r border-slate-300",align:"left",children:l.donvi.kyhieu}),r(d,{align:"right",className:"bg-gray-300 flex justify-center items-center space-x-1",style:{width:"180px"},children:[a&&a.includes("sửa thí sinh")&&e(D,{variant:"contained",color:"success",size:"small",onClick:()=>o(l),children:e(oe,{style:{fontSize:"20px"}})}),a&&a.includes("xóa thí sinh")&&e(D,{variant:"contained",color:"error",size:"small",style:{marginLeft:"4px"},onClick:()=>t(l._id),children:e(he,{style:{fontSize:"20px"}})})]})]},l._id)};function Y(l){const o=me(),{count:t,page:a,rowsPerPage:i,onPageChange:n}=l,c=s=>{n(s,0)},g=s=>{n(s,a-1)},u=s=>{n(s,a+1)},f=s=>{n(s,Math.max(0,Math.ceil(t/i)-1))};return r(w,{sx:{flexShrink:0,ml:2.5},children:[e(C,{onClick:c,disabled:a===0,"aria-label":"first page",children:o.direction==="rtl"?e(R,{}):e(A,{})}),e(C,{onClick:g,disabled:a===0,"aria-label":"previous page",children:o.direction==="rtl"?e(E,{}):e(M,{})}),e(C,{onClick:u,disabled:a>=Math.ceil(t/i)-1,"aria-label":"next page",children:o.direction==="rtl"?e(M,{}):e(E,{})}),e(C,{onClick:f,disabled:a>=Math.ceil(t/i)-1,"aria-label":"last page",children:o.direction==="rtl"?e(A,{}):e(R,{})})]})}Y.propTypes={count:V.number.isRequired,onPageChange:V.func.isRequired,page:V.number.isRequired,rowsPerPage:V.number.isRequired};function ze({list:l,onClickOpenDialogEdit:o,onClickOpenDialogDelete:t}){const[a,i]=b.useState(0),[n,c]=b.useState(10),g=a>0?Math.max(0,(1+a)*n-l.length):0,u=(s,k)=>{i(k)},f=s=>{c(parseInt(s.target.value,10)),i(0)};return r(O,{children:[e(ce,{component:de,children:r(ge,{"aria-label":"custom pagination table",children:[e(ue,{children:r(_,{children:[e(d,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"#1976d2"},children:"SBD"}),e(d,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"#1976d2"},children:"Họ tên"}),e(d,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"#1976d2"},children:"Năm sinh"}),e(d,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"#1976d2"},children:"Cấp bậc"}),e(d,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"#1976d2"},children:"Chức vụ"}),e(d,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"#1976d2"},children:"Đơn vị công tác"}),e(d,{align:"center",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"#1976d2",maxWidth:"150px"},children:"Thao tác"})]})}),r(be,{children:[(n>0?l.slice(a*n,a*n+n):l).map(s=>e(Ve,{row:s,onClickOpenDialogEdit:o,onClickOpenDialogDelete:t},s._id)),g>0&&e(_,{style:{height:53*g},children:e(d,{colSpan:6})})]})]})}),e("div",{children:e(pe,{rowsPerPageOptions:[10,25,50,100,{label:"Tất cả",value:-1}],count:l.length,rowsPerPage:n,page:a,SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0},component:"div",onPageChange:u,onRowsPerPageChange:f,ActionsComponent:Y,labelRowsPerPage:"Số bản ghi hiển thị trên mỗi trang",labelDisplayedRows:function({from:k,to:T,count:y}){return`hiển thị ${k} đến ${T} bản ghi trong tổng số ${y!==-1?y:`more than ${T}`} bản ghi`}})})]})}const _e=b.forwardRef(function(o,t){return e(F,{direction:"up",ref:t,...o})}),Le=j(C)({position:"absolute",right:"16px",top:"4px"}),qe=L({hoten:v().required("Lỗi: Vui lòng nhập họ tên thí sinh"),sbd:I().required("Lỗi: Vui lòng nhập số báo danh"),capbac:v().required("Lỗi: Vui lòng chọn cấp hàm"),chucvu:v().required("Lỗi: Vui lòng chọn chức vụ"),donvi:v().required("Lỗi: Vui lòng chọn đơn vị công tác"),namsinh:v().required("Lỗi: Vui lòng nhập năm sinh")}).required();function Oe({open:l,onCloseDialogEdit:o,item:t,onSubmit:a,donviList:i}){const n=q({defaultValues:{hoten:"",sbd:1,donvi:"",namsinh:"1996",capbac:"Trung úy",chucvu:"Chiến sĩ"},resolver:N(qe)}),c=n.setValue;b.useEffect(()=>{t&&(c("hoten",t.hoten,{shouldValidate:!0}),c("sbd",t.sbd,{shouldValidate:!0}),c("namsinh",t.namsinh,{shouldValidate:!0}),c("donvi",t.donvi._id,{shouldValidate:!0}),c("capbac",t.capbac,{shouldValidate:!0}),c("chucvu",t.chucvu,{shouldValidate:!0}))},[t]);const g=async f=>{if(a){const s={...f,id_edit:t._id};await a(s),o()}},{isSubmitting:u}=n.formState;return e(O,{children:r(H,{fullWidth:!0,disableEscapeKeyDown:!0,onClose:(f,s)=>{s!=="backdropClick"&&o(f,s)},open:l,TransitionComponent:_e,keepMounted:!0,"aria-describedby":"alert-dialog-slide-description",children:[r(W,{style:{display:"flex",borderBottom:"1px solid #ccc",margin:"0 12px"},children:[e(G,{style:{color:"#333",fontSize:"32px"}}),e("span",{children:"Chỉnh sửa thông tin thí sinh"}),e(Le,{onClick:()=>o(),children:e(K,{style:{color:"#d32b2b"}})})]}),e(Q,{children:r(w,{children:[u?e(J,{}):"",r("form",{onSubmit:n.handleSubmit(g),style:{width:"100%"},children:[r(p,{container:!0,spacing:1,style:{alignItems:"center",justifyContent:"center"},children:[e(p,{item:!0,xs:12,md:12,lg:12,children:e(S,{name:"hoten",form:n,label:"Họ và tên *",type:"text",disabled:!1})}),e(p,{item:!0,xs:12,md:12,lg:12,children:e(S,{name:"sbd",form:n,label:"Số báo danh *",type:"number",disabled:!1})}),e(p,{item:!0,xs:12,md:12,lg:12,children:e(S,{name:"namsinh",form:n,label:"Năm sinh *",type:"text",disabled:!1})}),e(p,{item:!0,xs:12,md:12,lg:12,children:e(P,{name:"capbac",form:n,label:"Cấp bậc hàm *",disabled:!1,options:[{value:"Trung sĩ",label:"Trung sĩ"},{value:"Thượng sĩ",label:"Thượng sĩ"},{value:"Thiếu úy",label:"Thiếu úy"},{value:"Trung úy",label:"Trung úy"},{value:"Thượng úy",label:"Thượng úy"},{value:"Đại úy",label:"Đại úy"},{value:"Thiếu tá",label:"Thiếu tá"},{value:"Trung tá",label:"Trung tá"},{value:"Thượng tá",label:"Thượng tá"},{value:"Đại tá",label:"Đại tá"}]})}),e(p,{item:!0,xs:12,md:12,lg:12,children:e(P,{name:"chucvu",form:n,label:"Chức vụ công tác *",disabled:!1,options:[{value:"Chiến sĩ",label:"Chiến sĩ"},{value:"Cán bộ",label:"Cán bộ"},{value:"Phó đội trưởng và tương đương",label:"Phó đội trưởng và tương đương"},{value:"Đội trưởng và tương đương",label:"Đội trưởng và tương đương"},{value:"Phó Trưởng Công an xã, phường, thị trấn",label:"Phó Trưởng Công an xã, phường, thị trấn"},{value:"Trưởng Công an xã",label:"Trưởng Công an xã"},{value:"Trưởng Công an phường",label:"Trưởng Công an phường"},{value:"Trưởng Công an thị trấn",label:"Trưởng Công an thị trấn"},{value:"Phó Trưởng Công an huyện, thị xã, thành phố",label:"Phó Trưởng Công an huyện, thị xã, thành phố"},{value:"Trưởng Công an huyện, thị xã, thành phố",label:"Trưởng Công an huyện, thị xã, thành phố"},{value:"Phó Trưởng phòng và tương đương",label:"Phó Trưởng phòng và tương đương"},{value:"Trưởng phòng và tương đương",label:"Trưởng phòng và tương đương"}]})}),e(p,{item:!0,xs:12,md:12,lg:12,children:e(P,{name:"donvi",form:n,label:"Đơn vị công tác *",disabled:!1,options:i})})]}),e(U,{children:r(D,{color:"primary",variant:"contained",disabled:u,type:"submit",style:{margin:"4px auto"},children:[e($,{}),e("span",{children:"Cập nhật"})]})})]})]})})]})})}const we=L({}).required(),Re=()=>{q({defaultValues:{hoten:"",donvi:""},resolver:N(we)}),X(h=>h.authReducer.roles_x01);const[l,o]=b.useState([]);b.useState(null);const[t,a]=b.useState([]),i=fe(),{enqueueSnackbar:n}=ve();Te();const[c,g]=b.useState(!1),[u,f]=b.useState({status:!1,item:null}),s=h=>{f({item:h,status:!0})},k=()=>{f({...u,status:!1})},[T,y]=b.useState({status:!1,id_Delete:null}),Z=h=>{y({status:!0,id_Delete:h})},ee=()=>{y({...T,status:!1})},ne=()=>{y({...T,status:!1})};b.useEffect(()=>{id&&(async()=>{try{g(!0);let m=await z.getThisinhs({id_monthi:id});a(m.data),setTimeout(()=>{g(!1)},1e3)}catch(m){m.message==="Token không hợp lệ hoặc đã hết hạn. Vui lòng đăng nhập lại"&&(i("/login"),n(m.message,{anchorOrigin:{vertical:"bottom",horizontal:"right"},variant:"error"})),n(m.message,{anchorOrigin:{vertical:"bottom",horizontal:"right"},variant:"error"})}})()},[id]);const[ae,B]=b.useState(!1),te=()=>{B(!1)},le=()=>{B(!0)},ie=async h=>{try{let m={...h},x=await z.addThisinh(id,m);a(x.data.items),n("Thêm mới thành công!",{anchorOrigin:{vertical:"bottom",horizontal:"right"},variant:"success"})}catch(m){m.message==="Token không hợp lệ hoặc đã hết hạn. Vui lòng đăng nhập lại"&&(i("/login"),n(m.message,{anchorOrigin:{vertical:"bottom",horizontal:"right"},variant:"error"})),n(m.message,{anchorOrigin:{vertical:"bottom",horizontal:"right"},variant:"error"}),g(!1)}},re=async h=>{const m={...h,id_monthi:id,id_chuyende:h.id_edit};try{let x=await z.editThisinh(m);a(x.data.items),n(x.data.message,{anchorOrigin:{vertical:"bottom",horizontal:"right"},variant:"success"})}catch(x){x.message==="Token không hợp lệ hoặc đã hết hạn. Vui lòng đăng nhập lại"&&(i("/login"),n(x.message,{anchorOrigin:{vertical:"bottom",horizontal:"right"},variant:"error"})),n(x.message,{anchorOrigin:{vertical:"bottom",horizontal:"right"},variant:"error"})}},se=async()=>{try{let h=await z.deleteThisinh(id,T.id_Delete,{});a(h.data.items),y({...T,status:!1}),n(h.data.message,{anchorOrigin:{vertical:"bottom",horizontal:"right"},variant:"success"})}catch(h){h.message==="Token không hợp lệ hoặc đã hết hạn. Vui lòng đăng nhập lại"&&(i("/login"),n(h.message,{anchorOrigin:{vertical:"bottom",horizontal:"right"},variant:"error"})),n(h.message,{anchorOrigin:{vertical:"bottom",horizontal:"right"},variant:"error"})}};return r("div",{className:"mx-2 bg-white pb-2 px-4 shadow-2xl",children:[r("div",{className:"py-4 ml-4 mt-2",children:[r("h3",{className:"flex items-center space-x-2",children:[e(Ce,{}),e("span",{className:"text-lg font-semibold",children:"Quản lý chuyên đề của môn thi"})]}),e("div",{className:"text-end mb-4 mt-8",children:r(D,{variant:"contained",onClick:le,children:[e($,{}),"Thêm mới chuyên đề"]})}),c&&e(xe,{open:c})]}),e(De,{open:ae,onCloseDialogAdd:te,onSubmit:ie,donviList:l}),e(ze,{list:t,item:u.item,onClickOpenDialogDelete:Z,onClickOpenDialogEdit:s}),e(Oe,{open:u.status,item:u.item,onCloseDialogEdit:k,onSubmit:re,donviList:l}),e(ye,{open:T.status,onCloseDialogDelete:ee,onConfirmDelete:se,onCancelDelete:ne})]})};export{Re as default};
