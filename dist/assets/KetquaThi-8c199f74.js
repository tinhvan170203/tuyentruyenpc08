import{r as g,f as B,d as l,j as e,B as R,F as q,P as v,H as M,I as x,Q as D}from"./index-c0c1d070.js";import{m as z}from"./monthiApi-908fa848.js";import{d as $}from"./Dashboard-4cbedcd5.js";import{d as E,M as _}from"./ModalLoading-60884eb2.js";import{p as y,T as K,d as C,a as T,b as k,c as S}from"./LastPage-63162932.js";import{c as P,d as i,f as L,T as j,a as O,b as A,e as Y}from"./Edit-a5753ec9.js";import{B as F}from"./Box-f86258b2.js";import"./Link-9356d169.js";import{P as H}from"./PreviewBaithi-8b723011.js";import"./Toolbar-051d00b6.js";import"./Cancel-8a7aa1d2.js";import"./commonApi-ffe95de2.js";import"./axiosCommon-49906f86.js";import"./Radio-f1cc58b8.js";const I=({row:t,index:o,onClickOpenDialogEdit:c})=>{g.useState(null);const a=B(r=>r.authReducer.roles_x01);return l(P,{children:[e(i,{className:"border-r border-slate-300",align:"left",style:{fontWeight:"bold"},children:o+1}),e(i,{className:"border-r border-slate-300",align:"left",children:t==null?void 0:t.thongtinthisinh.name}),e(i,{className:"border-r border-slate-300",align:"left",children:t==null?void 0:t.thongtinthisinh.phone}),e(i,{className:"border-r border-slate-300",align:"left",children:t==null?void 0:t.socaudung}),l(i,{className:"border-r border-slate-300",align:"left",children:[" ",t==null?void 0:t.time]}),e(i,{className:"border-r border-slate-300",align:"left",children:t==null?void 0:t.rank}),e(i,{align:"right",className:"bg-gray-300 flex justify-center items-center space-x-1",children:a&&a.includes("sửa câu hỏi")&&l(R,{variant:"contained",color:"success",size:"small",onClick:()=>c(t),children:[e(L,{style:{fontSize:"20px"}}),"Xem bài thi"]})})]},o)};function N(t){const o=M(),{count:c,page:a,rowsPerPage:r,onPageChange:s}=t,f=n=>{s(n,0)},d=n=>{s(n,a-1)},p=n=>{s(n,a+1)},b=n=>{s(n,Math.max(0,Math.ceil(c/r)-1))};return l(F,{sx:{flexShrink:0,ml:2.5},children:[e(x,{onClick:f,disabled:a===0,"aria-label":"first page",children:o.direction==="rtl"?e(C,{}):e(T,{})}),e(x,{onClick:d,disabled:a===0,"aria-label":"previous page",children:o.direction==="rtl"?e(k,{}):e(S,{})}),e(x,{onClick:p,disabled:a>=Math.ceil(c/r)-1,"aria-label":"next page",children:o.direction==="rtl"?e(S,{}):e(k,{})}),e(x,{onClick:b,disabled:a>=Math.ceil(c/r)-1,"aria-label":"last page",children:o.direction==="rtl"?e(T,{}):e(C,{})})]})}N.propTypes={count:y.number.isRequired,onPageChange:y.func.isRequired,page:y.number.isRequired,rowsPerPage:y.number.isRequired};function W({list:t,onClickOpenDialogEdit:o,cuocthi:c}){const[a,r]=g.useState(0),[s,f]=g.useState(10),d=a>0?Math.max(0,(1+a)*s-t.length):0,p=(n,h)=>{r(h)},b=n=>{f(parseInt(n.target.value,10)),r(0)};return l(q,{children:[e(j,{component:v,children:l(O,{"aria-label":"custom pagination table",children:[e(A,{children:l(P,{children:[e(i,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"#1976d2"},children:"STT"}),e(i,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"#1976d2",minWidth:"150px"},children:"Họ tên"}),e(i,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"#1976d2"},children:"Số điện thoại"}),e(i,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"#1976d2"},children:"Số câu trả lời đúng"}),e(i,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"#1976d2"},children:"Thời gian hoàn thành (ms)"}),e(i,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"#1976d2"},children:"Xếp hạng"}),e(i,{align:"center",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"#1976d2"},children:"Thao tác"})]})}),l(Y,{children:[(s>0?t.slice(a*s,a*s+s):t).map((n,h)=>e(I,{row:n,cuocthi:c,index:h,onClickOpenDialogEdit:o},h)),d>0&&e(P,{style:{height:53*d},children:e(i,{colSpan:6})})]})]})}),e("div",{children:e(K,{rowsPerPageOptions:[10,25,50,100,{label:"Tất cả",value:-1}],count:t.length,rowsPerPage:s,page:a,SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0},component:"div",onPageChange:p,onRowsPerPageChange:b,ActionsComponent:N,labelRowsPerPage:"Số bản ghi hiển thị trên mỗi trang",labelDisplayedRows:function({from:h,to:m,count:u}){return`hiển thị ${h} đến ${m} bản ghi trong tổng số ${u!==-1?u:`more than ${m}`} bản ghi`}})})]})}const se=()=>{var h;let{id:t}=D();const[o,c]=g.useState(!0);g.useState(0);let[a,r]=g.useState(null),[s,f]=g.useState([]);const[d,p]=g.useState({status:!1,item:null}),b=m=>{p({item:m,status:!0}),console.log(m)},n=()=>{p({...d,status:!1})};return g.useEffect(()=>{(async()=>{let u=await z.getKetquaThi(t);console.log(u),r(u.data.cuocthi),f(u.data.data),c(!1)})()},[t]),l("div",{className:"mx-2 bg-white pb-2 px-4 shadow-2xl py-2",children:[l("h3",{className:"flex items-center space-x-2",children:[e($,{}),l("span",{className:"md:text-lg text-sm font-semibold",children:["Kết quả cuộc thi:  ",a==null?void 0:a.tencuocthi]})]}),l("ul",{className:"mt-2 ml-4",children:[l("li",{className:"text-gray-600 my-1",children:["Số lượng câu hỏi: ",e("span",{className:"font-semibold ml-2 text-black",children:a==null?void 0:a.soluongcauhoi})]}),l("li",{className:"text-gray-600 my-1",children:["Thời gian làm bài: ",l("span",{className:"font-semibold ml-2 text-black",children:[a==null?void 0:a.thoigianthi," phút"]})]}),l("li",{className:"text-gray-600 my-1",children:["Ngày thi: ",e("span",{className:"font-semibold ml-2 text-black",children:E(a==null?void 0:a.ngaytochucthi).format("DD/MM/YYYY")})]}),l("li",{className:"text-gray-600 my-1",children:["Tổng số lượt dự thi: ",e("span",{className:"font-semibold ml-2 text-black",children:s.length})]})]}),e("h4",{className:"text-center my-4 text-sm md:text-[16px] uppercase",children:"Bảng xếp hạng kết quả kiểm tra"}),e("div",{className:"my-2 shadow-md shadow-slate-500",children:e(W,{list:s,cuocthi:a,item:d.item,onClickOpenDialogEdit:b})}),o&&e(_,{open:o}),e(H,{open:d.status,item:d.item,onCloseDialogPreviewBaithi:n,idBaithi:(h=d.item)==null?void 0:h._id})]})};export{se as default};
