var q=Object.defineProperty;var M=(t,e,n)=>e in t?q(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var x=(t,e,n)=>(M(t,typeof e!="symbol"?e+"":e,n),n);import{r as m,n as U,d,v as k,j as s,w as h,af as F,l as I,y as _,a6 as p,F as z,T as K,a7 as Y,q as H,t as w,x as W,a8 as X,a9 as J,B as V,I as C,aa as P,ab as v,ac as T,ad as S,at as E,aR as G,ae as Q,H as Z}from"./index-47bea717.js";import{d as ee}from"./Dashboard-bc6ebfe8.js";import{P as te}from"./PreviewBaithi-bb3841c9.js";import"./commonApi-a636ccbb.js";import"./Radio-72cbe83c.js";const ae=({row:t,index:e,onClickOpenDialogEdit:n})=>{m.useState(null);const a=U(l=>l.authReducer.roles_x01);return d(k,{children:[s(h,{className:"border-r border-slate-300",align:"left",style:{fontWeight:"bold"},children:e+1}),s(h,{className:"border-r border-slate-300",align:"left",children:t==null?void 0:t.thongtinthisinh.name}),s(h,{className:"border-r border-slate-300",align:"left",children:(t==null?void 0:t.thongtinthisinh.birthday)&&F(t==null?void 0:t.thongtinthisinh.birthday).format("DD/MM/YYYY")}),s(h,{className:"border-r border-slate-300",align:"left",children:t==null?void 0:t.thongtinthisinh.phone}),s(h,{className:"border-r border-slate-300",align:"left",children:t==null?void 0:t.socaudung}),d(h,{className:"border-r border-slate-300",align:"left",children:[" ",t==null?void 0:t.time]}),s(h,{className:"border-r border-slate-300",align:"left",children:t==null?void 0:t.rank}),s(h,{align:"right",className:"bg-gray-300 flex justify-center items-center space-x-1",children:a&&a.includes("sửa câu hỏi")&&d(I,{variant:"contained",color:"success",size:"small",onClick:()=>n(t),children:[s(_,{style:{fontSize:"20px"}}),"Xem bài thi"]})})]},e)};function B(t){const e=J(),{count:n,page:a,rowsPerPage:l,onPageChange:i}=t,c=o=>{i(o,0)},r=o=>{i(o,a-1)},u=o=>{i(o,a+1)},g=o=>{i(o,Math.max(0,Math.ceil(n/l)-1))};return d(V,{sx:{flexShrink:0,ml:2.5},children:[s(C,{onClick:c,disabled:a===0,"aria-label":"first page",children:e.direction==="rtl"?s(P,{}):s(v,{})}),s(C,{onClick:r,disabled:a===0,"aria-label":"previous page",children:e.direction==="rtl"?s(T,{}):s(S,{})}),s(C,{onClick:u,disabled:a>=Math.ceil(n/l)-1,"aria-label":"next page",children:e.direction==="rtl"?s(S,{}):s(T,{})}),s(C,{onClick:g,disabled:a>=Math.ceil(n/l)-1,"aria-label":"last page",children:e.direction==="rtl"?s(v,{}):s(P,{})})]})}B.propTypes={count:p.number.isRequired,onPageChange:p.func.isRequired,page:p.number.isRequired,rowsPerPage:p.number.isRequired};function ne({list:t,onClickOpenDialogEdit:e,cuocthi:n}){const[a,l]=m.useState(0),[i,c]=m.useState(10),r=a>0?Math.max(0,(1+a)*i-t.length):0,u=(o,f)=>{l(f)},g=o=>{c(parseInt(o.target.value,10)),l(0)};return d(z,{children:[s(K,{component:Y,children:d(H,{"aria-label":"custom pagination table",children:[s(w,{children:d(k,{children:[s(h,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"#1976d2"},children:"STT"}),s(h,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"#1976d2",minWidth:"150px"},children:"Họ tên"}),s(h,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"#1976d2"},children:"Ngày sinh"}),s(h,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"#1976d2"},children:"Đơn vị"}),s(h,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"#1976d2"},children:"Số câu trả lời đúng"}),s(h,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"#1976d2"},children:"Thời gian hoàn thành (ms)"}),s(h,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"#1976d2"},children:"Xếp hạng"}),s(h,{align:"center",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"#1976d2"},children:"Thao tác"})]})}),d(W,{children:[(i>0?t.slice(a*i,a*i+i):t).map((o,f)=>s(ae,{row:o,cuocthi:n,index:f,onClickOpenDialogEdit:e},f)),r>0&&s(k,{style:{height:53*r},children:s(h,{colSpan:6})})]})]})}),s("div",{children:s(X,{rowsPerPageOptions:[10,25,50,100,{label:"Tất cả",value:-1}],count:t.length,rowsPerPage:i,page:a,SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0},component:"div",onPageChange:u,onRowsPerPageChange:g,ActionsComponent:B,labelRowsPerPage:"Số bản ghi hiển thị trên mỗi trang",labelDisplayedRows:function({from:f,to:b,count:y}){return`hiển thị ${f} đến ${b} bản ghi trong tổng số ${y!==-1?y:`more than ${b}`} bản ghi`}})})]})}const se=()=>/^((?!chrome|android).)*safari/i.test(navigator.userAgent),$=t=>Array.isArray(t)&&t.every(e=>typeof e=="object"&&!(e instanceof Array)),ie=t=>Array.isArray(t)&&t.every(e=>Array.isArray(e)),le=t=>Array.from(t.map(e=>Object.keys(e)).reduce((e,n)=>new Set([...e,...n]),[])),re=(t,e)=>{e=e||le(t);let n=e,a=e;$(e)&&(n=e.map(i=>i.label),a=e.map(i=>i.key));const l=t.map(i=>a.map(c=>oe(c,i)));return[n,...l]},oe=(t,e)=>{const n=t.replace(/\[([^\]]+)]/g,".$1").split(".").reduce(function(a,l,i,c){const r=a[l];if(r==null)c.splice(1);else return r},e);return n===void 0?t in e?e[t]:"":n},ce=t=>typeof t>"u"||t===null?"":t,A=(t,e=",",n='"')=>t.filter(a=>a).map(a=>a.map(l=>ce(l)).map(l=>`${n}${l}${n}`).join(e)).join(`
`),de=(t,e,n,a)=>A(e?[e,...t]:t,n,a),he=(t,e,n,a)=>A(re(t,e),n,a),pe=(t,e,n,a)=>e?`${e.join(n)}
${t}`:t.replace(/"/g,'""'),O=(t,e,n,a)=>{if($(t))return he(t,e,n,a);if(ie(t))return de(t,e,n,a);if(typeof t=="string")return pe(t,e,n);throw new TypeError('Data should be a "String", "Array of arrays" OR "Array of objects" ')},D=(t,e,n,a,l)=>{const i=O(t,n,a,l),c=se()?"application/csv":"text/csv",r=new Blob([e?"\uFEFF":"",i],{type:c}),u=`data:${c};charset=utf-8,${e?"\uFEFF":""}${i}`,g=window.URL||window.webkitURL;return typeof g.createObjectURL>"u"?u:g.createObjectURL(r)},j={data:p.oneOfType([p.string,p.array,p.func]).isRequired,headers:p.array,target:p.string,separator:p.string,filename:p.string,uFEFF:p.bool,onClick:p.func,asyncOnClick:p.bool,enclosingCharacter:p.string},L={separator:",",filename:"generatedBy_react-csv.csv",uFEFF:!0,asyncOnClick:!1,enclosingCharacter:'"'},ue={target:"_blank"};class R extends E.Component{constructor(e){super(e),this.state={}}buildURI(){return D(...arguments)}componentDidMount(){const{data:e,headers:n,separator:a,enclosingCharacter:l,uFEFF:i,target:c,specs:r,replace:u}=this.props;this.state.page=window.open(this.buildURI(e,i,n,a,l),c,r,u)}getWindow(){return this.state.page}render(){return null}}x(R,"defaultProps",Object.assign(L,ue)),x(R,"propTypes",j);class N extends E.Component{constructor(e){super(e),this.buildURI=this.buildURI.bind(this)}buildURI(){return D(...arguments)}handleLegacy(e,n=!1){if(window.navigator.msSaveOrOpenBlob){e.preventDefault();const{data:a,headers:l,separator:i,filename:c,enclosingCharacter:r,uFEFF:u}=this.props,g=n&&typeof a=="function"?a():a;let o=new Blob([u?"\uFEFF":"",O(g,l,i,r)]);return window.navigator.msSaveBlob(o,c),!1}}handleAsyncClick(e){const n=a=>{if(a===!1){e.preventDefault();return}this.handleLegacy(e,!0)};this.props.onClick(e,n)}handleSyncClick(e){if(this.props.onClick(e)===!1){e.preventDefault();return}this.handleLegacy(e)}handleClick(){return e=>{if(typeof this.props.onClick=="function")return this.props.asyncOnClick?this.handleAsyncClick(e):this.handleSyncClick(e);this.handleLegacy(e)}}render(){const{data:e,headers:n,separator:a,filename:l,uFEFF:i,children:c,onClick:r,asyncOnClick:u,enclosingCharacter:g,...o}=this.props,b=typeof window>"u"?"":this.buildURI(e,i,n,a,g);return s("a",{download:l,...o,ref:y=>this.link=y,target:"_self",href:b,onClick:this.handleClick(),children:c})}}x(N,"defaultProps",L),x(N,"propTypes",j);const Ce=()=>{var f;let{id:t}=G();const[e,n]=m.useState(!0);m.useState(0);let[a,l]=m.useState(null),[i,c]=m.useState([]);const[r,u]=m.useState({status:!1,item:null}),g=b=>{u({item:b,status:!0}),console.log(b)},o=()=>{u({...r,status:!1})};return m.useEffect(()=>{(async()=>{let y=await Z.getKetquaThi(t);console.log(y),l(y.data.cuocthi),c(y.data.data),n(!1)})()},[t]),d("div",{className:"mx-2 bg-white pb-2 px-4 shadow-2xl py-2",children:[d("h3",{className:"flex items-center space-x-2",children:[s(ee,{}),d("span",{className:"md:text-lg text-sm font-semibold",children:["Kết quả cuộc thi:  ",a==null?void 0:a.tencuocthi]})]}),d("ul",{className:"mt-2 ml-4",children:[d("li",{className:"text-gray-600 my-1",children:["Số lượng câu hỏi: ",s("span",{className:"font-semibold ml-2 text-black",children:a==null?void 0:a.soluongcauhoi})]}),d("li",{className:"text-gray-600 my-1",children:["Thời gian làm bài: ",d("span",{className:"font-semibold ml-2 text-black",children:[a==null?void 0:a.thoigianthi," phút"]})]}),d("li",{className:"text-gray-600 my-1",children:["Ngày thi: ",s("span",{className:"font-semibold ml-2 text-black",children:F(a==null?void 0:a.ngaytochucthi).format("DD/MM/YYYY")})]}),d("li",{className:"text-gray-600 my-1",children:["Tổng số lượt dự thi: ",s("span",{className:"font-semibold ml-2 text-black",children:i.length})]})]}),s("h4",{className:"text-center my-4 text-sm md:text-[16px] uppercase",children:"Bảng xếp hạng kết quả kiểm tra"}),s("div",{className:"my-2 shadow-md shadow-slate-500",children:s(ne,{list:i,cuocthi:a,item:r.item,onClickOpenDialogEdit:g})}),e&&s(Q,{open:e}),s(te,{open:r.status,item:r.item,onCloseDialogPreviewBaithi:o,idBaithi:(f=r.item)==null?void 0:f._id})]})};export{Ce as default};
